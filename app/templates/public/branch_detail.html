{% extends "base.html" %}

{% block content %}
<style>
    .slider-container {
        scroll-snap-type: x mandatory;
    }

    .slider-item {
        scroll-snap-align: start;
    }

    .room-status-available {
        background: rgba(39, 174, 96, 0.1);
        color: #27AE60;
    }

    .room-status-pending {
        background: rgba(243, 156, 18, 0.1);
        color: #F39C12;
    }

    .room-status-occupied {
        background: rgba(189, 195, 199, 0.1);
        color: #7F8C8D;
    }

    #floorPlan svg {
        width: 100%;
        height: 100%;
    }

    #floorPlan .room {
        stroke: #fff;
        stroke-width: 2;
        cursor: pointer;
        transition: all 0.3s;
    }

    #floorPlan .room:hover {
        filter: brightness(0.9);
    }

    #floorPlan .room.available {
        fill: rgba(39, 174, 96, 0.2);
    }

    #floorPlan .room.pending {
        fill: rgba(243, 156, 18, 0.2);
    }

    #floorPlan .room.occupied {
        fill: rgba(127, 140, 141, 0.2);
    }

    #floorPlan text {
        fill: #4b5563;
        font-size: 14px;
        pointer-events: none;
    }
</style>

<!-- Sub Header / Branch Nav -->
<div class="bg-white border-b border-gray-100 sticky top-20 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
        <a href="/" class="flex items-center text-gray-700 hover:text-primary">
            <i class="ri-arrow-left-line text-xl mr-2"></i>
            <span>메인으로</span>
        </a>
        <div class="flex space-x-1 bg-gray-100 p-1 rounded-full overflow-x-auto" x-data="{
            branches: [],
            currentBranchId: {{ branch.id }},
            async init() {
                try {
                    const response = await fetch('/api/public/branches');
                    if (response.ok) {
                        this.branches = await response.json();
                    }
                } catch (error) {
                    console.error('Error loading branches:', error);
                }
            },
            navigateToBranch(branchId) {
                if (branchId !== this.currentBranchId) {
                    window.location.href = `/branches/${branchId}`;
                }
            }
        }">
            <template x-for="b in branches" :key="b.id">
                <button @click="navigateToBranch(b.id)"
                    :class="b.id === currentBranchId ? 'bg-white text-gray-900 shadow-sm font-medium' : 'text-gray-600 hover:text-gray-900'"
                    class="px-4 py-1.5 rounded-full whitespace-nowrap text-sm transition-all" x-text="b.name">
                </button>
            </template>
        </div>
    </div>
</div>

<!-- Hero Slider -->
<div class="relative h-[480px] overflow-hidden" x-data="{
    currentSlide: 0,
    images: [{% if branch.images %}{% for img in branch.images.all() %}{'id': {{ img.id }}, 'url': '{{ img.image_url }}'}{% if not loop.last %},{% endif %}{% endfor %}{% endif %}],
    init() {
        if (this.images.length === 0 && '{{ branch.image_url }}') {
            this.images.push({ id: 0, url: '{{ branch.image_url }}' });
        }
        // Fallback images if no images at all
        if (this.images.length === 0) {
            this.images = [
                { id: -1, url: 'https://readdy.ai/api/search-image?query=professional%20music%20practice%20room%20with%20high-end%20equipment%2C%20acoustic%20panels%2C%20modern%20lighting%2C%20clean%20and%20minimalist%20design%2C%20warm%20atmosphere%2C%20perfect%20for%20musicians&width=1920&height=480&seq=8&orientation=landscape' },
                { id: -2, url: 'https://readdy.ai/api/search-image?query=recording%20studio%20control%20room%20with%20mixing%20console%2C%20monitors%2C%20acoustic%20treatment%2C%20modern%20design%2C%20professional%20equipment&width=1920&height=480&seq=9&orientation=landscape' },
                { id: -3, url: 'https://readdy.ai/api/search-image?query=vocal%20recording%20booth%20with%20high-end%20microphone%2C%20acoustic%20panels%2C%20modern%20lighting%2C%20professional%20setup&width=1920&height=480&seq=10&orientation=landscape' }
            ];
        }
        
        // Auto slide
        setInterval(() => {
            this.currentSlide = (this.currentSlide + 1) % this.images.length;
        }, 5000);
    }
}">
    <div class="slider-container flex w-full h-full overflow-hidden relative">
        <template x-for="(img, index) in images" :key="img.id">
            <div class="slider-item w-full h-full flex-shrink-0 absolute top-0 left-0 transition-opacity duration-1000 ease-in-out"
                :class="currentSlide === index ? 'opacity-100 z-10' : 'opacity-0 z-0'"
                :style="`background-image: url('${img.url}'); background-size: cover; background-position: center;`">
                <!-- Dark overlay for better text visibility if needed -->
                <div class="absolute inset-0 bg-black/20"></div>
            </div>
        </template>
    </div>

    <!-- Navigation Dots -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-20">
        <template x-for="(img, index) in images" :key="index">
            <button @click="currentSlide = index" class="w-2 h-2 rounded-full transition-all duration-300"
                :class="currentSlide === index ? 'bg-white w-6' : 'bg-white/50 hover:bg-white/80'">
            </button>
        </template>
    </div>

    <!-- Navigation Arrows -->
    <button @click="currentSlide = (currentSlide - 1 + images.length) % images.length"
        class="absolute left-4 top-1/2 transform -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-black/30 hover:bg-black/50 text-white flex items-center justify-center backdrop-blur-sm transition-all hover:scale-110">
        <i class="ri-arrow-left-s-line text-2xl"></i>
    </button>
    <button @click="currentSlide = (currentSlide + 1) % images.length"
        class="absolute right-4 top-1/2 transform -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-black/30 hover:bg-black/50 text-white flex items-center justify-center backdrop-blur-sm transition-all hover:scale-110">
        <i class="ri-arrow-right-s-line text-2xl"></i>
    </button>
</div>

<div class="max-w-7xl mx-auto px-3 md:px-6 lg:px-8 py-4 md:py-8 lg:py-12">
    <!-- Branch Info -->
    <div class="mb-12">
        <h1 class="text-xl md:text-2xl lg:text-3xl font-bold mb-3 md:mb-4">{{ branch.name }}</h1>
        <p class="text-gray-600 mb-8">{{ branch.address }}</p>

        <div class="grid grid-cols-2 gap-6 mb-12">
            <div class="flex items-center">
                <div class="w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full mr-3">
                    <i class="ri-time-line text-gray-600"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-500">운영시간</p>
                    <p class="font-medium">{{ branch.operating_hours or '24시간' }}</p>
                </div>
            </div>
            <div class="flex items-center">
                <div class="w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full mr-3">
                    <i class="ri-phone-line text-gray-600"></i>
                </div>
                <div>
                    <p class="text-sm text-gray-500">연락처</p>
                    <p class="font-medium">{{ branch.contact or '032-123-4567' }}</p>
                </div>
            </div>
        </div>



        <!-- Room List Cards with Tabs -->
        <div class="mb-16" x-data="{ activeRoomTab: 'monthly' }">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
                <h2 class="text-2xl font-bold">룸 타입 및 가격</h2>

                <!-- Room Type Tabs -->
                <div class="flex p-1 bg-gray-100 rounded-xl w-fit">
                    <button @click="activeRoomTab = 'monthly'"
                        :class="activeRoomTab === 'monthly' ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-500 hover:text-gray-700'"
                        class="px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2">
                        <i class="ri-calendar-line"></i> 월간 이용
                    </button>
                    <!-- <button @click="activeRoomTab = 'time_based'"
                        :class="activeRoomTab === 'time_based' ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-500 hover:text-gray-700'"
                        class="px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2">
                        <i class="ri-time-line"></i> 시간제 예약
                    </button> -->
                </div>
            </div>

            <!-- Monthly Rooms -->
            <div x-show="activeRoomTab === 'monthly'" x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {% set monthly_rooms = branch.rooms|selectattr("room_type", "equalto",
                    "monthly")|selectattr("status", "equalto", "available")|list %}
                    {% for room in monthly_rooms %}
                    <div class="bg-white rounded-lg border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group"
                        onclick="location.href='/rooms/{{ room.id }}'">
                        <!-- Room Image -->
                        <div class="relative h-48 overflow-hidden bg-gray-100">
                            {% set room_images = room.images.all() if room.images else [] %}
                            {% if room_images|length > 0 %}
                            <img src="{{ room_images[0].image_url }}" alt="{{ room.name }}"
                                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            {% else %}
                            <div class="w-full h-full flex items-center justify-center">
                                <i class="ri-image-line text-4xl text-gray-400"></i>
                            </div>
                            {% endif %}
                            <!-- Status Badge -->
                            <div class="absolute top-3 right-3">
                                <span
                                    class="room-status-available px-3 py-1 rounded-full text-sm font-medium shadow-sm">계약가능</span>
                            </div>
                        </div>
                        <!-- Room Info -->
                        <div class="p-5">
                            <h3 class="font-bold text-lg mb-1">{{ room.name }}</h3>
                            <p class="text-sm text-gray-500 mb-4">{{ room.description or '주거/작업용 월간 임대 룸' }}</p>

                            <!-- Price Info -->
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">월 임대료</span>
                                    <span class="font-bold text-primary">₩{{ "{:,}".format(room.price) }}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">보증금</span>
                                    <span class="font-medium text-gray-900">₩{{ "{:,}".format(room.deposit or 0)
                                        }}</span>
                                </div>
                            </div>

                            <!-- Additional Info -->
                            <div
                                class="pt-4 border-t border-gray-100 flex items-center justify-between text-sm text-gray-500">
                                <div class="flex items-center">
                                    <i class="ri-ruler-line mr-1"></i>
                                    <span>{{ room.area or '-' }}㎡</span>
                                </div>
                                <div class="text-primary font-medium group-hover:translate-x-1 transition-transform">
                                    자세히 보기 <i class="ri-arrow-right-line"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div
                        class="col-span-full py-12 text-center bg-gray-50 rounded-2xl border border-dashed border-gray-200">
                        <i class="ri-door-lock-line text-4xl text-gray-300 mb-2 block"></i>
                        <p class="text-gray-500 font-medium">현재 계약 가능한 월간 이용 룸이 없습니다.</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Time-based Rooms -->
            <!-- Time-based Rooms -->
            <!-- <div x-show="activeRoomTab === 'time_based'" x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0"
                x-cloak>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {% set time_rooms = branch.rooms|selectattr("room_type", "equalto",
                    "time_based")|selectattr("status", "equalto", "available")|list %}
                    {% for room in time_rooms %}
                    <div class="bg-white rounded-lg border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group"
                        onclick="location.href='/rooms/{{ room.id }}'">
                        
                        <div class="relative h-48 overflow-hidden bg-gray-100">
                            {% set room_images = room.images.all() if room.images else [] %}
                            {% if room_images|length > 0 %}
                            <img src="{{ room_images[0].image_url }}" alt="{{ room.name }}"
                                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            {% else %}
                            <div class="w-full h-full flex items-center justify-center">
                                <i class="ri-image-line text-4xl text-gray-400"></i>
                            </div>
                            {% endif %}
                            
                            <div class="absolute top-3 right-3">
                                <span
                                    class="room-status-available px-3 py-1 rounded-full text-sm font-medium shadow-sm">예약가능</span>
                            </div>
                        </div>
                        
                        <div class="p-5">
                            <h3 class="font-bold text-lg mb-1">{{ room.name }}</h3>
                            <p class="text-sm text-gray-500 mb-4">{{ room.description or '필요한 시간만큼 이용하는 예약형 룸' }}</p>

                            
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">시간당 가격</span>
                                    <span class="font-bold text-primary">₩{{ "{:,}".format(room.price) }}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">최소 이용 시간</span>
                                    <span class="font-medium text-gray-900">1시간</span>
                                </div>
                            </div>

                            
                            <div
                                class="pt-4 border-t border-gray-100 flex items-center justify-between text-sm text-gray-500">
                                <div class="flex items-center">
                                    <i class="ri-ruler-line mr-1"></i>
                                    <span>{{ room.area or '-' }}㎡</span>
                                </div>
                                <div class="text-primary font-medium group-hover:translate-x-1 transition-transform">
                                    자세히 보기 <i class="ri-arrow-right-line"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div
                        class="col-span-full py-12 text-center bg-gray-50 rounded-2xl border border-dashed border-gray-200">
                        <i class="ri-time-line text-4xl text-gray-300 mb-2 block"></i>
                        <p class="text-gray-500 font-medium">현재 예약 가능한 시간제 룸이 없습니다.</p>
                    </div>
                    {% endfor %}
                </div>
            </div> -->
        </div>

        <!-- Floor Plan Section (Real Admin-Configured Data) -->
        {% include 'public/public_floor_plan_component.html' %}

        <!-- Traffic & Parking -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16">
            <div>
                <h2 class="text-2xl font-bold mb-6">교통 안내</h2>
                <div
                    class="h-[320px] rounded-lg overflow-hidden mb-6 border border-gray-100 shadow-inner bg-gray-50 flex items-center justify-center relative">
                    {% if branch.map_info %}
                    <div class="absolute inset-0 w-full h-full [&>iframe]:w-full [&>iframe]:h-full border-none">
                        {{ branch.map_info|safe }}
                    </div>
                    {% else %}
                    <div class="text-center">
                        <i class="ri-map-pin-line text-4xl text-gray-200 mb-2 block"></i>
                        <p class="text-sm text-gray-400">등록된 지도가 없습니다</p>
                    </div>
                    {% endif %}
                </div>
                <div class="p-6 bg-white rounded-lg border border-gray-100">
                    <div class="flex items-start">
                        <div
                            class="w-10 h-10 flex items-center justify-center bg-blue-100 rounded-full mr-3 flex-shrink-0">
                            <i class="ri-train-line text-blue-600"></i>
                        </div>
                        <div>
                            <p class="font-medium mb-1">찾아오시는 길</p>
                            <p class="text-gray-600 leading-relaxed">{{ branch.traffic_info or '지하철, 버스 등 대중교통 이용이
                                편리합니다. 상세
                                경로는 지점으로 문의 부탁드립니다.' }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <h2 class="text-2xl font-bold mb-6">주차 안내</h2>
                <div class="p-6 bg-white rounded-lg border border-gray-100 min-h-[464px]">
                    <div class="flex items-start mb-6">
                        <div
                            class="w-10 h-10 flex items-center justify-center bg-primary/10 rounded-full mr-3 flex-shrink-0">
                            <i class="ri-parking-line text-primary"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium mb-1">건물 내 주차 및 인근 주차장</h3>
                            <p class="text-gray-600 leading-relaxed">{{ branch.parking_info or '주차 가능 여부 및 요금은 지점 상황에 따라
                                다를
                                수 있습니다. 방문 전 미리 문의해 주세요.' }}</p>
                        </div>
                    </div>
                    <div class="space-y-4 text-sm mt-8 pt-8 border-t border-gray-50">
                        <div class="flex items-center text-gray-500">
                            <i class="ri-time-line mr-2"></i>
                            <span>이용 시간: {{ branch.operating_hours or '24시간' }}</span>
                        </div>
                        <div class="flex items-center text-gray-500">
                            <i class="ri-information-line mr-2"></i>
                            <span>문의처: {{ branch.contact or '032-123-4567' }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Slider Logic
            const sliderContainer = document.querySelector('.slider-container');
            const sliderItems = document.querySelectorAll('.slider-item');
            const dots = document.querySelectorAll('.bottom-4 button');
            let currentSlide = 0;

            function updateDots() {
                dots.forEach((dot, index) => {
                    dot.classList.toggle('opacity-50', index !== currentSlide);
                });
            }

            function showSlide(index) {
                sliderContainer.scrollTo({
                    left: sliderItems[index].offsetLeft,
                    behavior: 'smooth'
                });
                currentSlide = index;
                updateDots();
            }

            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => showSlide(index));
            });

            setInterval(() => {
                currentSlide = (currentSlide + 1) % sliderItems.length;
                showSlide(currentSlide);
            }, 5000);

            // Floor Plan Logic
            const floorPlan = document.getElementById('floorPlan');
            const floorTabs = document.querySelectorAll('.floor-tab');
            const floorContents = document.querySelectorAll('.floor-content');
            let scale = 1;
            let isDragging = false;
            let startPos = { x: 0, y: 0 };
            let currentPos = { x: 0, y: 0 };

            // Mock Data for Floor Plan (Demo)
            const roomData = {
                '1A1': { name: '1A-1 연습실', type: '보컬 연습실', area: '15㎡', capacity: '2인', price: '₩600,000', date: '2025-10-01', status: 'available', image: 'https://readdy.ai/api/search-image?query=professional%20vocal%20practice%20room%20with%20acoustic%20treatment%2C%20modern%20design%2C%20clean%20and%20minimalist%20setup%2C%20high-end%20equipment&width=400&height=300&seq=14&orientation=landscape' },
                '1A2': { name: '1A-2 연습실', type: '보컬 연습실', area: '15㎡', capacity: '2인', price: '₩600,000', date: '2025-11-01', status: 'pending', image: 'https://readdy.ai/api/search-image?query=professional%20vocal%20practice%20room%20with%20acoustic%20panels%2C%20modern%20lighting%2C%20clean%20design&width=400&height=300&seq=15&orientation=landscape' },
                '1A3': { name: '1A-3 연습실', type: '보컬 연습실', area: '15㎡', capacity: '2인', price: '₩600,000', date: '2026-01-01', status: 'occupied', image: 'https://readdy.ai/api/search-image?query=professional%20vocal%20practice%20room%20with%20recording%20equipment%2C%20modern%20design&width=400&height=300&seq=16&orientation=landscape' },
                '2B1': { name: '2B-1 연습실', type: '밴드 연습실', area: '30㎡', capacity: '4-5인', price: '₩1,200,000', date: '2025-10-01', status: 'available', image: 'https://readdy.ai/api/search-image?query=professional%20band%20practice%20room%20with%20drum%20set%2C%20amplifiers%2C%20modern%20design&width=400&height=300&seq=17&orientation=landscape' },
                '2B2': { name: '2B-2 연습실', type: '밴드 연습실', area: '30㎡', capacity: '4-5인', price: '₩1,200,000', date: '2025-11-01', status: 'pending', image: 'https://readdy.ai/api/search-image?query=professional%20band%20practice%20room%20with%20instruments%2C%20modern%20lighting&width=400&height=300&seq=18&orientation=landscape' },
                '3C1': { name: '3C-1 연습실', type: '녹음실', area: '40㎡', capacity: '6-8인', price: '₩1,500,000', date: '2026-01-01', status: 'occupied', image: 'https://readdy.ai/api/search-image?query=professional%20recording%20studio%20with%20mixing%20console%2C%20monitors%2C%20modern%20design&width=400&height=300&seq=19&orientation=landscape' },
                '3C2': { name: '3C-2 연습실', type: '녹음실', area: '40㎡', capacity: '6-8인', price: '₩1,500,000', date: '2026-02-01', status: 'available', image: 'https://readdy.ai/api/search-image?query=professional%20recording%20studio%20with%20mixing%20console%2C%20monitors%2C%20modern%20design&width=400&height=300&seq=20&orientation=landscape' }
            };

            // Zoom Controls
            document.getElementById('zoomIn').addEventListener('click', () => { scale = Math.min(scale * 1.2, 3); updateTransform(); });
            document.getElementById('zoomOut').addEventListener('click', () => { scale = Math.max(scale / 1.2, 0.5); updateTransform(); });
            document.getElementById('resetZoom').addEventListener('click', () => { scale = 1; currentPos = { x: 0, y: 0 }; updateTransform(); });

            // Pan Controls
            floorPlan.addEventListener('mousedown', (e) => { isDragging = true; startPos = { x: e.clientX - currentPos.x, y: e.clientY - currentPos.y }; });
            window.addEventListener('mousemove', (e) => { if (!isDragging) return; currentPos = { x: e.clientX - startPos.x, y: e.clientY - startPos.y }; updateTransform(); });
            window.addEventListener('mouseup', () => { isDragging = false; });

            function updateTransform() {
                floorPlan.style.transform = `translate(${currentPos.x}px, ${currentPos.y}px) scale(${scale})`;
            }

            // Floor Tabs
            floorTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const floor = tab.dataset.floor;
                    floorTabs.forEach(t => t.classList.remove('active', 'bg-white', 'text-gray-900', 'shadow-sm'));
                    floorContents.forEach(c => c.classList.add('hidden'));
                    tab.classList.add('active', 'bg-white', 'text-gray-900', 'shadow-sm');
                    document.querySelector(`.floor-content[data-floor="${floor}"]`).classList.remove('hidden');
                });
            });

            // Room Click
            document.querySelectorAll('.room').forEach(room => {
                room.addEventListener('click', () => {
                    const roomId = room.dataset.room;
                    const data = roomData[roomId];
                    if (!data) return;

                    document.getElementById('roomEmpty').style.display = 'none';
                    document.getElementById('roomDetail').style.display = 'block';
                    document.getElementById('roomImage').src = data.image;
                    document.getElementById('roomArea').textContent = data.area;
                    document.getElementById('roomCapacity').textContent = data.capacity;
                    document.getElementById('roomPrice').textContent = data.price;
                    document.getElementById('roomDate').textContent = data.date;

                    const contractBtn = document.getElementById('contractBtn');
                    const inquiryBtn = document.getElementById('inquiryBtn');

                    if (data.status === 'available') {
                        contractBtn.style.display = 'block';
                        inquiryBtn.style.display = 'block';
                    } else if (data.status === 'pending') {
                        contractBtn.style.display = 'none';
                        inquiryBtn.style.display = 'block';
                    } else {
                        contractBtn.style.display = 'none';
                        inquiryBtn.style.display = 'none';
                    }
                });
            });

            // Modals (Simplified for Demo)
            const modalHtml = `
    <div id="contractModal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg w-full max-w-lg mx-4">
            <div class="p-6 border-b border-gray-100"><h3 class="text-xl font-medium">계약 신청</h3></div>
            <div class="p-6"><p>계약 신청 기능은 로그인이 필요합니다.</p></div>
            <div class="p-6 border-t border-gray-100 flex justify-end gap-3">
                <button onclick="document.getElementById('contractModal').classList.add('hidden')" class="!rounded-button px-6 py-2 border border-gray-300">닫기</button>
                <a href="/login" class="!rounded-button px-6 py-2 bg-primary text-white">로그인</a>
            </div>
        </div>
    </div>`;
            document.body.insertAdjacentHTML('beforeend', modalHtml);

            document.getElementById('contractBtn').addEventListener('click', () => {
                document.getElementById('contractModal').classList.remove('hidden');
            });
        });
    </script>
    {% endblock %}