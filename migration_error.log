Connected to DB.
Select 1 result: 1
SQL Content: CREATE TABLE IF NOT EXISTS branch_floors (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    floor VARCHAR(20) NOT NULL,
    floor_plan_image VARCHAR(255),
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    UNIQUE KEY unique_branch_floor (branch_id, floor)
);

Traceback (most recent call last):
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\connection_cext.py", line 639, in cmd_query
    self._cmysql.query(
_mysql_connector.MySQLInterfaceError: Referencing column 'branch_id' and referenced column 'id' in foreign key constraint 'branch_floors_ibfk_1' are incompatible.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\cursor_cext.py", line 330, in execute
    result = self._cnx.cmd_query(
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\opentelemetry\context_propagation.py", line 77, in wrapper
    return method(cnx, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\connection_cext.py", line 647, in cmd_query
    raise get_mysql_exception(
mysql.connector.errors.DatabaseError: 3780 (HY000): Referencing column 'branch_id' and referenced column 'id' in foreign key constraint 'branch_floors_ibfk_1' are incompatible.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\workspace\Eroom-Studio\debug_migration.py", line 21, in debug_migration
    connection.execute(text(sql_content))
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\cursor_cext.py", line 330, in execute
    result = self._cnx.cmd_query(
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\opentelemetry\context_propagation.py", line 77, in wrapper
    return method(cnx, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gnswp\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\connection_cext.py", line 647, in cmd_query
    raise get_mysql_exception(
sqlalchemy.exc.DatabaseError: (mysql.connector.errors.DatabaseError) 3780 (HY000): Referencing column 'branch_id' and referenced column 'id' in foreign key constraint 'branch_floors_ibfk_1' are incompatible.
[SQL: CREATE TABLE IF NOT EXISTS branch_floors (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    floor VARCHAR(20) NOT NULL,
    floor_plan_image VARCHAR(255),
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    UNIQUE KEY unique_branch_floor (branch_id, floor)
);
]
(Background on this error at: https://sqlalche.me/e/20/4xp6)
